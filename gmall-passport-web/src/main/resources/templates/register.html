<!DOCTYPE html>
<html lang="en"  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="/css/gm1.css"/>
		<script src="./js/jquery-3.1.1.min.js" type="text/javascript" charset="utf-8"></script>
		<title>注册</title>
	</head>
	<body>
		<!--顶部logo-->
		<header>
			<a href="http://www.baidu.com"><img src="/img/logo1.jpg"/></a><p>欢迎注册</p>
 
		</header>
		
		<div class="top-2">
			<div class="top-2a">
				 
				<p> </p>
			</div>
		</div>
		
		<!--大图-->
		<div class="top-3">
			<div class="img_1">
				<img src="/img/5731485aN1134b4f0.jpg"/>
			</div>
			<div id="sign">
 
				<div class="si_cen">
					<h2 class="act btn1">用户注册</h2>
				</div>
 
				<div class="si_bom1 tab" style="display: block;">
					<div  class="error" style="width: 205px;height: 20px" >
					请输入用户名、密码、电话号码和邮箱!
				</div>
					<form id="registerForm" action="./registerUser" method="post">
					<ul>
						<li class="top_1">
							<img src="/img/user_03.png" class="err_img1"/>
							<input type="text" name="loginName" placeholder=" 用户名"  class="user" />

						</li>
						<li>
							<img src="/img/user_06.png" class="err_img2"/>
							<input type="password" name="passwd" placeholder=" 密码" class="password"/>
						</li>
						<li>
							<img src="/img/user_06.png" class="err_img2"/>
							<input type="text" name="phoneNum" placeholder=" 手机号" class="phoneNum"/>
						</li>
						<li>
							<img src="/img/user_06.png" class="err_img2"/>
							<input type="email" name="email" placeholder=" 邮箱" class="email"/>
						</li>
						<li class="ent"><button id="btn2" type="button" class="btn2"><a class="a">注 &nbsp; &nbsp;册</a></button></li>
					</ul>
					</form>
				</div>
			<div class="si_out">

			</div>
			</div>
		</div>

		
		<!--底部-->
		 
		
	</body>
	<script language="JavaScript">
 
			
			var btn2=document.getElementsByClassName('btn2')[0];
			var user=document.getElementsByClassName('user')[0];
			var pass=document.getElementsByClassName('password')[0];
            var phoneNum=document.getElementsByClassName('phoneNum')[0];
            var Ema=document.getElementsByClassName('email')[0];

			var err=document.getElementsByClassName('error')[0];

			var err_img1=document.getElementsByClassName('err_img1')[0];
			var err_img2=document.getElementsByClassName('err_img2')[0];

			btn2.onclick=function(){
                var re = /^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;
	 			if(!re.test(Ema.value)){
                  //  alert("邮箱格式有误，请重填!");
                    $(".error").text("邮箱格式有误，请重填!");
                    $(".error").show();
                    return ;
				}
                var uPattern = /^[a-zA-Z0-9_-]{4,16}$/;
	 			if(!uPattern.test(user.value)){
                    $(".error").text("用户名，4到16位(字母，数字，无特殊字符)");
                    $(".error").show();
                    return ;
				}

                if(!(/^1[34578]\d{9}$/.test(phoneNum.value))){
                   // alert("手机号码格式有误，请重填!");
                    $(".error").text("手机号码格式有误，请重填!");
                    $(".error").show();
                    return ;
                }
				if(user.value == '' || pass.value ==''||phoneNum.value==''||Ema.value==''){
					err.style.display='block';
					user.style.border='1px solid red';
					pass.style.border='1px solid red';
                    pass2.style.border='1px solid red';
					err_img1.src='img/img11.png';
					err_img2.src='img/img22.png';
				}
				else
				{

					/*$("#loginForm").serialize() 获取表单中的所有元素值*/
					/*alert($("#loginForm").serialize());*/
					console.log($("#registerForm").serialize());
					/*ajax */
                    $.post("/registerUser",$("#registerForm").serialize(),function (data) {

                    if(data&&data!='LoginFail'&&data!='PhoneFail'&&data!='EmailFail'){
                            alert("注册成功！");
                            window.location.href="index.html";
                            return ;
                        }else if(data=='LoginFail'){
                           // alert("注册失败!");
                             $(".error").text("用户名已被注册！");
                             $(".error").show();
                        }
                    else if(data=='PhoneFail'){
                        // alert("注册失败!");
                        $(".error").text("电话号码已被使用！");
                        $(".error").show();
                    }
                    else if(data=='EmailFail'){
                        // alert("注册失败!");
                        $(".error").text("邮箱号已被使用！");
                        $(".error").show();
                    }

                    }   );
                }
			 return;


				}
			 user.onfocus=function(){
                 
                user.style.border='1px solid #999';

		 }

            pass.onfocus=function(){
                
                pass.style.border='1px solid #999';
            }
            user.onblur=function(){
                 
                user.style.border='1px solid green';
            }
            pass.onblur=function(){
                
                pass.style.border='1px solid green';
            }
	</script>
</html>
